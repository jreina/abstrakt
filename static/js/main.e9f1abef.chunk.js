(this["webpackJsonpabstrakt-ui"]=this["webpackJsonpabstrakt-ui"]||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},188:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(24),c=a.n(r),i=(a(103),a(104),a(58)),s=a.n(i),o=a(17),u=a(40),m=a.n(u),d=m.a.initializeApp({apiKey:"AIzaSyBP8Eo61hqQ5w_iHpCZMNBeTXwPXbhDoeY",authDomain:"abstrakt-6eb75.firebaseapp.com",databaseURL:"https://abstrakt-6eb75.firebaseio.com",projectId:"abstrakt-6eb75",storageBucket:"abstrakt-6eb75.appspot.com",messagingSenderId:"133869053674",appId:"1:133869053674:web:920e97064ef99e147c9993",measurementId:"G-3R5QHNZBS9"}),f=d.auth(),E={googleProvider:new m.a.auth.GoogleAuthProvider},b=d,p=a(97),v=function(e){var t=Object(n.useState)({isLoading:!0,data:null}),a=Object(o.a)(t,2),l=a[0],r=a[1];return Object(n.useEffect)((function(){e.onSnapshot((function(e){r({isLoading:!1,data:e.docs.map((function(e){return Object(p.a)({},e.data(),{id:e.id})}))})}))}),[]),l},g=l.a.createContext({user:null}),k=function(){return Object(n.useContext)(g)},N=function(e){var t=e.onSelect,a=k().user,r=b.firestore().collection("users/".concat(a.uid,"/references")),c=v(r).data,i=Object(n.useState)(""),s=Object(o.a)(i,2),u=s[0],m=s[1],d=function(e){return function(a){t(e),m("")}},f=""===u?[]:null===c||void 0===c?void 0:c.filter((function(e){return e.title.includes(u)}));return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"search",className:"sr-only"},"search for an activity"),l.a.createElement("input",{type:"search",className:"form-control",id:"search",placeholder:"search for a ref",onChange:function(e){var t=e.target.value;m(t)},value:u,onKeyDown:function(e){"Enter"===e.key&&(t({title:u,tags:[]}),m(""))},autoComplete:"off"}),l.a.createElement("em",null,"press enter to create a new activity")),f?l.a.createElement("ul",{className:"list-group list-group-flush"},f.map((function(e){return l.a.createElement("li",{className:"list-group-item",key:e.id},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("h5",{className:"mb-1"},e.title),l.a.createElement("span",null,l.a.createElement("small",{className:"link pointer",onClick:d(e)},"[start]")," ",l.a.createElement("small",{className:"link pointer",onClick:(t=e.id,function(){if(t)return b.firestore().collection("users/".concat(a.uid,"/references")).doc(t).delete()})},"[drop]"))));var t}))):null)},h=a(21),y=a.n(h),j=a(198),O=a(193),w=a(96),S=a(199),C=a(95),x=a(194),I=a(196),D=j.a("tags"),A=function(){var e,t,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],i=r[1],u=Object(n.useState)(),m=Object(o.a)(u,2),d=m[0],f=m[1],E=k().user;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Start something new"),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement(N,{onSelect:f}),d?l.a.createElement("div",null,l.a.createElement("h5",{className:"card-title"},d.title),l.a.createElement("div",null,(e=d.tags,t=function(e){return f(O.a(D,w.a(S.a(C.a(e),x.a))))},e?e.map((function(e,a){return l.a.createElement("span",{key:a,className:"badge badge-dark badge-pill"},e," ",l.a.createElement("span",{className:"link",onClick:function(){return t(e)}},"x"))})):null)),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"add-tag",className:"sr-only"},"add a tag"),l.a.createElement("input",{type:"search",className:"form-control",id:"add-tag",placeholder:"add a tag...",autoComplete:"off",onChange:function(e){i(e.target.value)},value:c,onKeyDown:function(e){"Enter"===e.key&&""!==c&&(f(O.a(D,I.a([c]))),i(""))}})),l.a.createElement("button",{className:"btn btn-outline-success btn-block btn-sm",onClick:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&E){e.next=2;break}return e.abrupt("return");case 2:b.firestore().collection("users/".concat(E.uid,"/timeEntries")).add({start:y()().utc().toISOString(),title:d.title,tags:d.tags}),d.id||b.firestore().collection("users/".concat(E.uid,"/references")).add(d),f(void 0);case 5:case"end":return e.stop()}}))}},"Start"),l.a.createElement("button",{className:"btn btn-outline-success btn-block btn-sm"},"Instance")):null)))},H=a(85),B=a.n(H),M=a(59),z=a(60),F=function(e){var t=e.dropAction,a=Object(n.useState)(!1),r=Object(o.a)(a,2),c=r[0],i=r[1];return c?l.a.createElement("span",null,"delete?"," ",l.a.createElement("span",{className:"btn btn-outline-danger btn-sm mr-1",onClick:t},"yup")," ",l.a.createElement("span",{className:"btn btn-outline-dark btn-sm mr-1",onClick:function(){return i(!1)}},"nah")):l.a.createElement("button",{className:"btn btn-outline-dark btn-sm mr-1",onClick:function(){return i(!0)}},l.a.createElement(M.a,{icon:z.b}))},P=a(86),G=a.n(P),L=a(76),K=a.n(L),J=function(e,t){return function(){b.firestore().collection("users/".concat(e.uid,"/timeEntries")).doc(t).update("end",y()().utc().toISOString())}},Q=function(e,t){return function(){return b.firestore().collection("users/".concat(e.uid,"/timeEntries")).doc(t).delete()}},R=function(e){var t=e.entry,a=k().user,r=Object(n.useState)(!1),c=Object(o.a)(r,2),i=c[0],s=c[1];return l.a.createElement("li",{className:"list-group-item list-group-item-action",key:t.id},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("p",{className:"mb-1"},t.title),l.a.createElement("p",null,l.a.createElement(F,{dropAction:Q(a,t.id)}),l.a.createElement("button",{className:"btn btn-outline-dark btn-sm",onClick:function(){return s((function(e){return!e}))},disabled:!0},l.a.createElement(M.a,{icon:z.a})))),l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},t.tags?l.a.createElement("small",null,l.a.createElement("em",null,t.tags.join(", "))):null,l.a.createElement("small",null,l.a.createElement("span",null,i?l.a.createElement(K.a,{value:y()(t.start).toDate(),disableClock:"true"}):l.a.createElement("em",null,y()(t.start).format("MM/DD HH:mm"))),"end"in t?l.a.createElement("span",null,i?l.a.createElement(K.a,{value:y()(t.end).toDate(),disableClock:"true"}):l.a.createElement("em",null," ","- ",y()(null===t||void 0===t?void 0:t.end).format("HH:mm")," (",y()(t.end).diff(y()(t.start),"minutes")," ","minutes)")):i?null:l.a.createElement("span",null,l.a.createElement("em",null," ","(",l.a.createElement(G.a,{date:t.start.toString()}),")"," ",l.a.createElement("span",{className:"link pointer",onClick:J(a,t.id)},"finish"))))))},T=function(e){var t,a=e.entry;return l.a.createElement("li",{className:"list-group-item list-group-item-action",key:a.id},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("p",{className:"mb-1"},a.title),l.a.createElement("small",null,l.a.createElement(F,{dropAction:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}}))),l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},a.data?l.a.createElement("small",null,l.a.createElement("em",null,"string"===typeof a.data?a.data:null===a||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.join(", "))):null,l.a.createElement("small",null,l.a.createElement("em",null,a.time.format("MM/DD HH:mm")))))},U=function(e){var t=e.entries;return l.a.createElement("ul",{className:"list-group"},null===t?l.a.createElement("span",{className:"d-flex justify-content-center"},l.a.createElement(B.a,{type:"MutatingDots"})):t.map((function(e,t){return"start"in e?l.a.createElement(R,{entry:e,key:t}):"time"in e?l.a.createElement(T,{entry:e,key:t}):null})))},W=function(){var e=k().user,t=b.firestore().collection("users/".concat(e.uid,"/timeEntries")).orderBy("start","desc").limit(10),a=v(t).data;return l.a.createElement(U,{entries:a})},X=a(87),Z=function(){var e=Object(n.useState)((function(){var e=m.a.auth().currentUser;return{initializing:!e,user:e}})),t=Object(o.a)(e,2),a=t[0],l=t[1];function r(e){l({initializing:!1,user:e})}return Object(n.useEffect)((function(){var e=m.a.auth().onAuthStateChanged(r);return function(){return e()}}),[]),a},q=function(e){var t=e.signIn;return l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"jumbotron"},l.a.createElement("h2",{className:"display-4"},"Welcome to abstrakt"),l.a.createElement("p",{className:"lead"},l.a.createElement("em",null,"take control of your time")),l.a.createElement("button",{className:"btn btn-outline-dark",onClick:t},"Sign in with Google")))},Y=a(197),_=a(200),V=a(195),$=function(e){var t=e.signOut,a=Z().user;return l.a.createElement(Y.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},l.a.createElement(Y.a.Brand,{href:"#home"},"abstrakt"),l.a.createElement(Y.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),l.a.createElement(Y.a.Collapse,{id:"responsive-navbar-nav"},a?l.a.createElement(_.a,null,l.a.createElement(V.a,{title:null===a||void 0===a?void 0:a.displayName,id:"collasible-nav-dropdown"},l.a.createElement(V.a.Divider,null),l.a.createElement(V.a.Item,{onClick:t},"Log Out"))):null))};var ee=Object(X.a)({providers:E,firebaseAppAuth:f})((function(e){var t=e.signOut,a=e.signInWithGoogle,n=Z(),r=n.initializing,c=n.user;return l.a.createElement(l.a.Fragment,null,l.a.createElement($,{signOut:t}),l.a.createElement("div",{className:"container-xl"},r||c?null:l.a.createElement(q,{signIn:a}),!r&&c?l.a.createElement(g.Provider,{value:{user:c}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"}),l.a.createElement("div",{className:"col-md-6"},l.a.createElement(A,null),l.a.createElement(W,null)))):null))}));a(186),a(187);c.a.render(l.a.createElement(ee,null),document.getElementById("root"))},98:function(e,t,a){e.exports=a(188)}},[[98,1,2]]]);
//# sourceMappingURL=main.e9f1abef.chunk.js.map