(this["webpackJsonpabstrakt-ui"]=this["webpackJsonpabstrakt-ui"]||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},188:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),c=a.n(l),i=(a(103),a(104),a(58)),s=a.n(i),o=a(17),u=a(40),m=a.n(u),d=m.a.initializeApp({apiKey:"AIzaSyBP8Eo61hqQ5w_iHpCZMNBeTXwPXbhDoeY",authDomain:"abstrakt-6eb75.firebaseapp.com",databaseURL:"https://abstrakt-6eb75.firebaseio.com",projectId:"abstrakt-6eb75",storageBucket:"abstrakt-6eb75.appspot.com",messagingSenderId:"133869053674",appId:"1:133869053674:web:920e97064ef99e147c9993",measurementId:"G-3R5QHNZBS9"}),f=d.auth(),E={googleProvider:new m.a.auth.GoogleAuthProvider},b=d,p=a(97),v=function(e){var t=Object(n.useState)({isLoading:!0,data:null}),a=Object(o.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){e.onSnapshot((function(e){l({isLoading:!1,data:e.docs.map((function(e){return Object(p.a)({},e.data(),{id:e.id})}))})}))}),[]),r},g=r.a.createContext({user:null}),N=function(){return Object(n.useContext)(g)},k=function(e){var t=e.onSelect,a=N().user,l=b.firestore().collection("users/".concat(a.uid,"/references")),c=v(l).data,i=Object(n.useState)(""),s=Object(o.a)(i,2),u=s[0],m=s[1],d=function(e){return function(a){t(e),m("")}},f=""===u?[]:null===c||void 0===c?void 0:c.filter((function(e){return e.title.includes(u)}));return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"search",className:"sr-only"},"search for an activity"),r.a.createElement("input",{type:"search",className:"form-control",id:"search",placeholder:"search for a ref",onChange:function(e){var t=e.target.value;m(t)},value:u,onKeyDown:function(e){"Enter"===e.key&&(t({title:u,tags:[]}),m(""))},autoComplete:"off"}),r.a.createElement("em",null,"press enter to create a new activity")),f?r.a.createElement("ul",{className:"list-group list-group-flush"},f.map((function(e){return r.a.createElement("li",{className:"list-group-item",key:e.id},r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{className:"mb-1"},e.title),r.a.createElement("span",null,r.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:d(e)},"Use this")," ",r.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:(t=e.id,function(){if(t)return b.firestore().collection("users/".concat(a.uid,"/references")).doc(t).delete()})},"Delete activity"))));var t}))):null)},h=a(21),y=a.n(h),j=a(198),w=a(193),O=a(96),C=a(199),S=a(95),x=a(194),D=a(196),I=j.a("tags"),A=function(){var e,t,a=Object(n.useState)(""),l=Object(o.a)(a,2),c=l[0],i=l[1],u=Object(n.useState)(),m=Object(o.a)(u,2),d=m[0],f=m[1],E=N().user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},d?r.a.createElement("div",null,r.a.createElement("h5",{className:"card-title"},d.title),r.a.createElement("div",{className:"mb-1"},(e=d.tags,t=function(e){return f(w.a(I,O.a(C.a(S.a(e),x.a))))},e?e.map((function(e,a){return r.a.createElement("span",{key:a,className:"badge badge-dark pointer mr-1",onClick:function(){return t(e)}},r.a.createElement("span",null,e))})):null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"add-tag",className:"sr-only"},"add a tag"),r.a.createElement("input",{type:"search",className:"form-control",id:"add-tag",placeholder:"press enter to add...",autoComplete:"off",onChange:function(e){i(e.target.value)},value:c,onKeyDown:function(e){"Enter"===e.key&&""!==c&&(f(w.a(I,D.a([c]))),i(""))}}),r.a.createElement("em",null,"click or tap a tag to remove it")),r.a.createElement("button",{className:"btn btn-outline-success btn-sm mr-1",onClick:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&E){e.next=2;break}return e.abrupt("return");case 2:b.firestore().collection("users/".concat(E.uid,"/timeEntries")).add({start:y()().utc().toISOString(),title:d.title,tags:d.tags}),d.id||b.firestore().collection("users/".concat(E.uid,"/references")).add(d),f(void 0);case 5:case"end":return e.stop()}}))}},"Start"),r.a.createElement("button",{className:"btn btn-outline-warning btn-sm",onClick:function(){f(void 0)}},"Cancel")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"card-title"},"Start something new"),r.a.createElement(k,{onSelect:f})))))},H=a(85),B=a.n(H),F=a(59),M=a(60),z=function(e){var t=e.dropAction,a=Object(n.useState)(!1),l=Object(o.a)(a,2),c=l[0],i=l[1];return c?r.a.createElement("span",null,"delete?"," ",r.a.createElement("span",{className:"btn btn-outline-danger btn-sm mr-1",onClick:t},"yup")," ",r.a.createElement("span",{className:"btn btn-outline-dark btn-sm mr-1",onClick:function(){return i(!1)}},"nah")):r.a.createElement("button",{className:"btn btn-outline-dark btn-sm mr-1",onClick:function(){return i(!0)}},r.a.createElement(F.a,{icon:M.b}))},P=a(86),G=a.n(P),L=a(76),K=a.n(L),U=function(e,t){return function(){b.firestore().collection("users/".concat(e.uid,"/timeEntries")).doc(t).update("end",y()().utc().toISOString())}},J=function(e,t){return function(){return b.firestore().collection("users/".concat(e.uid,"/timeEntries")).doc(t).delete()}},Q=function(e){var t=e.entry,a=N().user,l=Object(n.useState)(!1),c=Object(o.a)(l,2),i=c[0],s=c[1];return r.a.createElement("li",{className:"list-group-item list-group-item-action",key:t.id},r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("p",{className:"mb-1"},t.title),r.a.createElement("p",null,r.a.createElement(z,{dropAction:J(a,t.id)}),r.a.createElement("button",{className:"btn btn-outline-dark btn-sm",onClick:function(){return s((function(e){return!e}))},disabled:!0},r.a.createElement(F.a,{icon:M.a})))),r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},t.tags?r.a.createElement("small",null,r.a.createElement("em",null,t.tags.join(", "))):null,r.a.createElement("small",null,r.a.createElement("span",null,i?r.a.createElement(K.a,{value:y()(t.start).toDate(),disableClock:"true"}):r.a.createElement("em",null,y()(t.start).format("MM/DD HH:mm"))),"end"in t?r.a.createElement("span",null,i?r.a.createElement(K.a,{value:y()(t.end).toDate(),disableClock:"true"}):r.a.createElement("em",null," ","- ",y()(null===t||void 0===t?void 0:t.end).format("HH:mm")," (",y()(t.end).diff(y()(t.start),"minutes")," ","minutes)")):i?null:r.a.createElement("span",null,r.a.createElement("em",null," ","(",r.a.createElement(G.a,{date:t.start.toString()}),")"," ",r.a.createElement("span",{className:"link pointer",onClick:U(a,t.id)},"finish"))))))},R=function(e){var t,a=e.entry;return r.a.createElement("li",{className:"list-group-item list-group-item-action",key:a.id},r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("p",{className:"mb-1"},a.title),r.a.createElement("small",null,r.a.createElement(z,{dropAction:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}}))),r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},a.data?r.a.createElement("small",null,r.a.createElement("em",null,"string"===typeof a.data?a.data:null===a||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.join(", "))):null,r.a.createElement("small",null,r.a.createElement("em",null,a.time.format("MM/DD HH:mm")))))},T=function(e){var t=e.entries;return r.a.createElement("ul",{className:"list-group"},null===t?r.a.createElement("span",{className:"d-flex justify-content-center"},r.a.createElement(B.a,{type:"MutatingDots"})):t.map((function(e,t){return"start"in e?r.a.createElement(Q,{entry:e,key:t}):"time"in e?r.a.createElement(R,{entry:e,key:t}):null})))},W=function(){var e=N().user,t=b.firestore().collection("users/".concat(e.uid,"/timeEntries")).orderBy("start","desc").limit(10),a=v(t).data;return r.a.createElement(T,{entries:a})},X=a(87),Z=function(){var e=Object(n.useState)((function(){var e=m.a.auth().currentUser;return{initializing:!e,user:e}})),t=Object(o.a)(e,2),a=t[0],r=t[1];function l(e){r({initializing:!1,user:e})}return Object(n.useEffect)((function(){var e=m.a.auth().onAuthStateChanged(l);return function(){return e()}}),[]),a},q=function(e){var t=e.signIn;return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h2",{className:"display-4"},"Welcome to abstrakt"),r.a.createElement("p",{className:"lead"},r.a.createElement("em",null,"take control of your time")),r.a.createElement("button",{className:"btn btn-outline-dark",onClick:t},"Sign in with Google")))},Y=a(197),_=a(200),V=a(195),$=function(e){var t=e.signOut,a=Z().user;return r.a.createElement(Y.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(Y.a.Brand,{href:"#home"},"abstrakt"),r.a.createElement(Y.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(Y.a.Collapse,{id:"responsive-navbar-nav"},a?r.a.createElement(_.a,null,r.a.createElement(V.a,{title:null===a||void 0===a?void 0:a.displayName,id:"collasible-nav-dropdown"},r.a.createElement(V.a.Divider,null),r.a.createElement(V.a.Item,{onClick:t},"Log Out"))):null))};var ee=Object(X.a)({providers:E,firebaseAppAuth:f})((function(e){var t=e.signOut,a=e.signInWithGoogle,n=Z(),l=n.initializing,c=n.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement($,{signOut:t}),r.a.createElement("div",{className:"container-xl"},l||c?null:r.a.createElement(q,{signIn:a}),!l&&c?r.a.createElement(g.Provider,{value:{user:c}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"}),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(A,null),r.a.createElement(W,null)))):null))}));a(186),a(187);c.a.render(r.a.createElement(ee,null),document.getElementById("root"))},98:function(e,t,a){e.exports=a(188)}},[[98,1,2]]]);
//# sourceMappingURL=main.e59c9816.chunk.js.map