(this["webpackJsonpabstrakt-ui"]=this["webpackJsonpabstrakt-ui"]||[]).push([[0],{36:function(e,t,a){e.exports=a(80)},41:function(e,t,a){},42:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(29),c=a.n(r),s=(a(41),a(42),a(24)),i=a.n(s),o=a(9),u=a(18),m=a.n(u),d=m.a.initializeApp({apiKey:"AIzaSyBP8Eo61hqQ5w_iHpCZMNBeTXwPXbhDoeY",authDomain:"abstrakt-6eb75.firebaseapp.com",databaseURL:"https://abstrakt-6eb75.firebaseio.com",projectId:"abstrakt-6eb75",storageBucket:"abstrakt-6eb75.appspot.com",messagingSenderId:"133869053674",appId:"1:133869053674:web:920e97064ef99e147c9993",measurementId:"G-3R5QHNZBS9"}),f=d.auth(),E={googleProvider:new m.a.auth.GoogleAuthProvider},p=d,b=a(35),g=function(e){var t=Object(n.useState)({isLoading:!0,data:null}),a=Object(o.a)(t,2),l=a[0],r=a[1];return Object(n.useEffect)((function(){e.onSnapshot((function(e){r({isLoading:!1,data:e.docs.map((function(e){return Object(b.a)({},e.data(),{id:e.id})}))})}))}),[]),l},v=l.a.createContext({user:null}),N=function(){return Object(n.useContext)(v)},k=function(e){var t=e.onSelect,a=N().user,r=p.firestore().collection("users/".concat(a.uid,"/references")),c=g(r).data,s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],m=i[1],d=function(e){return function(a){t(e),m("")}},f=""===u?[]:null===c||void 0===c?void 0:c.filter((function(e){return e.title.includes(u)}));return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"search",className:"sr-only"},"search for a ref"),l.a.createElement("input",{type:"search",className:"form-control",id:"search",placeholder:"search for a ref",onChange:function(e){var t=e.target.value;m(t)},value:u,onKeyDown:function(e){"Enter"===e.key&&(t({title:u,tags:[]}),m(""))},autoComplete:"off"})),f?l.a.createElement("ul",{className:"list-group list-group-flush"},f.map((function(e){return l.a.createElement("li",{className:"list-group-item",key:e.id},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("h5",{className:"mb-1"},e.title),l.a.createElement("span",null,l.a.createElement("small",{className:"link pointer",onClick:d(e)},"[start]")," ",l.a.createElement("small",{className:"link pointer",onClick:(t=e.id,function(){if(t)return p.firestore().collection("users/".concat(a.uid,"/references")).doc(t).delete()})},"[drop]"))));var t}))):null)},h=a(15),y=a.n(h),j=a(85),w=a(82),S=a(34),O=a(86),C=a(33),x=a(83),I=a(84),A=j.a("tags"),D=function(){var e,t,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],s=r[1],u=Object(n.useState)(),m=Object(o.a)(u,2),d=m[0],f=m[1],E=N().user;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Start something new"),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement(k,{onSelect:f}),l.a.createElement("hr",null),d?l.a.createElement("div",null,l.a.createElement("h5",{className:"card-title"},d.title),l.a.createElement("div",null,(e=d.tags,t=function(e){return f(w.a(A,S.a(O.a(C.a(e),x.a))))},e?e.map((function(e,a){return l.a.createElement("span",{key:a,className:"badge badge-dark badge-pill"},e," ",l.a.createElement("span",{className:"link",onClick:function(){return t(e)}},"x"))})):null)),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"add-tag",className:"sr-only"},"add a tag"),l.a.createElement("input",{type:"search",className:"form-control",id:"add-tag",placeholder:"add a tag...",autoComplete:"off",onChange:function(e){s(e.target.value)},value:c,onKeyDown:function(e){"Enter"===e.key&&""!==c&&(f(w.a(A,I.a([c]))),s(""))}})),l.a.createElement("button",{className:"btn btn-outline-success btn-block btn-sm",onClick:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&E){e.next=2;break}return e.abrupt("return");case 2:p.firestore().collection("users/".concat(E.uid,"/timeEntries")).add({start:y()().utc().toISOString(),title:d.title,tags:d.tags}),d.id||p.firestore().collection("users/".concat(E.uid,"/references")).add(d),f(void 0);case 5:case"end":return e.stop()}}))}},"Start"),l.a.createElement("button",{className:"btn btn-outline-success btn-block btn-sm"},"Instance")):null)))},H=a(30),B=a.n(H),M=function(e){var t=e.dropAction,a=Object(n.useState)(!1),r=Object(o.a)(a,2),c=r[0],s=r[1];return c?l.a.createElement("span",null,"sure?"," ",l.a.createElement("span",{className:"link pointer text-danger",onClick:t},"yup")," ",l.a.createElement("span",{className:"link pointer",onClick:function(){return s(!1)}},"nah")):l.a.createElement("span",{className:"link pointer",onClick:function(){return s(!0)}},"drop")},z=a(31),F=a.n(z),P=function(e,t){return function(){p.firestore().collection("users/".concat(e.uid,"/timeEntries")).doc(t).update("end",y()().utc().toISOString())}},G=function(e,t){return function(){return p.firestore().collection("users/".concat(e.uid,"/timeEntries")).doc(t).delete()}},K=function(e){var t=e.entry,a=N().user;return l.a.createElement("li",{className:"list-group-item list-group-item-action",key:t.id},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("p",{className:"mb-1"},t.title),l.a.createElement("small",null,l.a.createElement(M,{dropAction:G(a,t.id)}))),l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},t.tags?l.a.createElement("small",null,l.a.createElement("em",null,t.tags.join(", "))):null,l.a.createElement("small",null,function(e,t){var a=[l.a.createElement("span",{key:"1"},l.a.createElement("em",null,y()(e.start).format("MM/DD HH:mm")))];if("end"in e){var n=y()(e.end).diff(y()(e.start),"minutes");a.push(l.a.createElement("span",{key:"2"},l.a.createElement("em",null," ","- ",y()(null===e||void 0===e?void 0:e.end).format("HH:mm")," (",n," minutes)")))}else a.push(l.a.createElement("span",{key:"3"},l.a.createElement("em",null," ","(",l.a.createElement(F.a,{date:e.start.toString()}),")"," ",l.a.createElement("span",{className:"link pointer",onClick:P(t,e.id)},"finish"))));return a}(t,a))))},L=function(e){var t,a=e.entry;return l.a.createElement("li",{className:"list-group-item list-group-item-action",key:a.id},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("p",{className:"mb-1"},a.title),l.a.createElement("small",null,l.a.createElement(M,{dropAction:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}}))),l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},a.data?l.a.createElement("small",null,l.a.createElement("em",null,"string"===typeof a.data?a.data:null===a||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.join(", "))):null,l.a.createElement("small",null,l.a.createElement("em",null,a.time.format("MM/DD HH:mm")))))},R=function(e){var t=e.entries;return l.a.createElement("ul",{className:"list-group"},null===t?l.a.createElement("span",{className:"d-flex justify-content-center"},l.a.createElement(B.a,{type:"MutatingDots"})):t.map((function(e,t){return"start"in e?l.a.createElement(K,{entry:e,key:t}):"time"in e?l.a.createElement(L,{entry:e,key:t}):null})))},J=function(){var e=N().user,t=p.firestore().collection("users/".concat(e.uid,"/timeEntries")).orderBy("start","desc").limit(5),a=g(t).data;return l.a.createElement(n.Fragment,null,l.a.createElement("h5",null,"Recent"),l.a.createElement(R,{entries:a}))},Q=a(32),U=function(e){var t=e.signIn;return l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"jumbotron"},l.a.createElement("h2",{className:"display-4"},"Welcome to abstrakt"),l.a.createElement("p",{className:"lead"},l.a.createElement("em",null,"take control of your time")),l.a.createElement("button",{className:"btn btn-outline-dark",onClick:t},"Sign in with Google")))};var W=Object(Q.a)({providers:E,firebaseAppAuth:f})((function(e){var t=e.signOut,a=e.signInWithGoogle,r=function(){var e=Object(n.useState)((function(){var e=m.a.auth().currentUser;return{initializing:!e,user:e}})),t=Object(o.a)(e,2),a=t[0],l=t[1];function r(e){l({initializing:!1,user:e})}return Object(n.useEffect)((function(){var e=m.a.auth().onAuthStateChanged(r);return function(){return e()}}),[]),a}(),c=r.initializing,s=r.user;return l.a.createElement("div",{className:"container-xl"},c||s?null:l.a.createElement(U,{signIn:a}),!c&&s?l.a.createElement(v.Provider,{value:{user:s}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("p",null,"Hello, ",s.displayName," [",l.a.createElement("span",{className:"link",onClick:t},"sign out"),"]"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement(D,null)),l.a.createElement("div",{className:"col-md-4"},l.a.createElement(J,null)))):null)}));a(78),a(79);c.a.render(l.a.createElement(W,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.abd507dc.chunk.js.map