(this["webpackJsonpabstrakt-ui"]=this["webpackJsonpabstrakt-ui"]||[]).push([[0],{35:function(e,t,a){e.exports=a(77)},40:function(e,t,a){},41:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(28),c=a.n(r),i=(a(40),a(41),a(9)),s=a(18),o=a.n(s),u=o.a.initializeApp({apiKey:"AIzaSyBP8Eo61hqQ5w_iHpCZMNBeTXwPXbhDoeY",authDomain:"abstrakt-6eb75.firebaseapp.com",databaseURL:"https://abstrakt-6eb75.firebaseio.com",projectId:"abstrakt-6eb75",storageBucket:"abstrakt-6eb75.appspot.com",messagingSenderId:"133869053674",appId:"1:133869053674:web:920e97064ef99e147c9993",measurementId:"G-3R5QHNZBS9"}),m=u.auth(),d={googleProvider:new o.a.auth.GoogleAuthProvider},f=u,E=function(e){var t=Object(n.useState)({isLoading:!0,data:null}),a=Object(i.a)(t,2),l=a[0],r=a[1];return Object(n.useEffect)((function(){e.onSnapshot((function(e){r({isLoading:!1,data:e})}))}),[]),l},p=l.a.createContext({user:null}),b=function(){return Object(n.useContext)(p)},v=function(e){var t=e.onSelect,a=b().user,r=f.firestore().collection("users/".concat(a.uid,"/references")),c=E(r).data,s=Object(n.useState)([]),o=Object(i.a)(s,2),u=o[0],m=o[1],d=function(){return m([])},p=function(e){return function(a){m([]),t(e),d()}};return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"search",className:"sr-only"},"search for a ref"),l.a.createElement("input",{type:"search",className:"form-control",id:"search",placeholder:"search for a ref",onKeyUp:function(e){var a=e.target.value,n=""===a?[]:c.docs.filter((function(e){return e.get("title").includes(a)}));m(n.map((function(e){return e.data()}))),"Enter"===e.key&&(t({title:a,tags:[]}),d())},autoComplete:"off"})),u?l.a.createElement("ul",{className:"list-group list-group-flush"},u.map((function(e){return l.a.createElement("li",{className:"list-group-item link",key:e.id,onClick:p(e)},e.title)}))):null)},g=a(11),N=a.n(g),k=a(82),h=a(79),y=a(81),j=a(33),w=a(83),S=a(32),O=a(80),C=k.a("tags"),x=function(){var e,t,a=Object(n.useState)(),r=Object(i.a)(a,2),c=r[0],s=r[1],o=b().user;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,"Start something new"),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement(v,{onSelect:s}),l.a.createElement("hr",null),c?l.a.createElement("div",null,l.a.createElement("h5",{className:"card-title"},c.title),l.a.createElement("div",null,(e=c.tags,t=function(e){return s(h.a(C,j.a(w.a(S.a(e),O.a))))},e?e.map((function(e,a){return l.a.createElement("span",{key:a,className:"badge badge-dark badge-pill"},e," ",l.a.createElement("span",{className:"link",onClick:function(){return t(e)}},"x"))})):null)),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"add-tag",className:"sr-only"},"add a tag"),l.a.createElement("input",{type:"search",className:"form-control",id:"add-tag",placeholder:"add a tag...",autoComplete:"off",onKeyUp:function(e){if("Enter"===e.key){var t=e.target.value;s(h.a(C,y.a([t])))}}})),l.a.createElement("button",{className:"btn btn-outline-success btn-block btn-sm",onClick:function(){c&&o&&(f.firestore().collection("users/".concat(o.uid,"/timeEntries")).add({start:N()().utc().toISOString(),title:c.title,tags:c.tags}),c.id||f.firestore().collection("users/".concat(o.uid,"/references")).add(c))}},"Start"),l.a.createElement("button",{className:"btn btn-outline-success btn-block btn-sm"},"Instance")):null)))},I=a(34),A=a(29),H=a.n(A),D=function(e){var t=e.dropAction,a=Object(n.useState)(!1),r=Object(i.a)(a,2),c=r[0],s=r[1];return c?l.a.createElement("span",null,"sure?"," ",l.a.createElement("span",{className:"link text-danger",onClick:t},"yup")," ",l.a.createElement("span",{className:"link",onClick:function(){return s(!1)}},"nah")):l.a.createElement("span",{className:"link",onClick:function(){return s(!0)}},"drop")},B=l.a.createContext({user:void 0}),M=(B.Provider,B.Consumer),P=function(e,t){return function(){f.firestore().collection("users/".concat(e.uid,"/timeEntries")).doc(t).update("end",N()().utc().toISOString())}},z=function(e){var t=e.entry;return l.a.createElement("li",{className:"list-group-item list-group-item-action",key:t.id},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("p",{className:"mb-1"},t.title),l.a.createElement("small",null,l.a.createElement(M,null,(function(e){return l.a.createElement(D,{dropAction:(a=e.user,n=t.id,function(){return f.firestore().collection("users/".concat(a.uid,"/timeEntries")).doc(n).delete()})});var a,n})))),l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},t.tags?l.a.createElement("small",null,l.a.createElement("em",null,t.tags.join(", "))):null,l.a.createElement(M,null,(function(e){return l.a.createElement("small",null,function(e,t){var a=[l.a.createElement("span",{key:"1"},l.a.createElement("em",null,N()(e.start).format("MM/DD HH:mm")))];if("end"in e){var n=N()(e.end).diff(N()(e.start),"minutes");a.push(l.a.createElement("span",{key:"2"},l.a.createElement("em",null," ","- ",N()(null===e||void 0===e?void 0:e.end).format("HH:mm")," (",n," minutes)")))}else{var r=N()().diff(N()(e.start),"minutes");a.push(l.a.createElement("span",{key:"3"},l.a.createElement("em",null," ","- now (",r," minutes)"," ",l.a.createElement("span",{className:"link",onClick:P(t,e.id)},"finish"))))}return a}(t,e.user))}))))},F=a(30),G=a.n(F),U=function(e){var t,a=e.entry;return l.a.createElement("li",{className:"list-group-item list-group-item-action",key:a.id},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("p",{className:"mb-1"},a.title),l.a.createElement("small",null,l.a.createElement(D,{dropAction:function(){return G.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}}))),l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},a.data?l.a.createElement("small",null,l.a.createElement("em",null,"string"===typeof a.data?a.data:null===a||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.join(", "))):null,l.a.createElement("small",null,l.a.createElement("em",null,a.time.format("MM/DD HH:mm")))))},K=function(e){var t=e.entries;return l.a.createElement("ul",{className:"list-group"},void 0===t?l.a.createElement("span",{className:"d-flex justify-content-center"},l.a.createElement(H.a,{type:"MutatingDots"})):t.map((function(e,t){return"start"in e?l.a.createElement(z,{entry:e,key:t}):"time"in e?l.a.createElement(U,{entry:e,key:t}):null})))},L=function(){var e=b().user,t=f.firestore().collection("users/".concat(e.uid,"/timeEntries")).orderBy("start","desc").limit(10),a=E(t).data;return l.a.createElement(n.Fragment,null,l.a.createElement("h5",null,"Recent"),l.a.createElement(K,{entries:null===a||void 0===a?void 0:a.docs.map((function(e){return Object(I.a)({id:e.id},e.data())}))}))},R=a(31),J=function(e){var t=e.signIn;return l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"jumbotron"},l.a.createElement("h2",{className:"display-4"},"Welcome to abstrakt"),l.a.createElement("p",{className:"lead"},l.a.createElement("em",null,"take control of your time")),l.a.createElement("button",{className:"btn btn-outline-dark",onClick:t},"Sign in with Google")))};var Q=Object(R.a)({providers:d,firebaseAppAuth:m})((function(e){var t=e.signOut,a=e.signInWithGoogle,r=function(){var e=Object(n.useState)((function(){var e=o.a.auth().currentUser;return{initializing:!e,user:e}})),t=Object(i.a)(e,2),a=t[0],l=t[1];function r(e){l({initializing:!1,user:e})}return Object(n.useEffect)((function(){var e=o.a.auth().onAuthStateChanged(r);return function(){return e()}}),[]),a}(),c=r.initializing,s=r.user;return l.a.createElement("div",{className:"container-xl"},c||s?null:l.a.createElement(J,{signIn:a}),!c&&s?l.a.createElement(p.Provider,{value:{user:s}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("p",null,"Hello, ",s.displayName," [",l.a.createElement("span",{className:"link",onClick:t},"sign out"),"]"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4"},l.a.createElement(x,null)),l.a.createElement("div",{className:"col-md-4"},l.a.createElement(L,null)))):null)}));a(75),a(76);c.a.render(l.a.createElement(Q,null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.fb62a859.chunk.js.map